<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WEBAPP TERRACLIMA</title>

  <!-- Leaflet (CSS + JS) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Estilos Calendario -->
  <link rel="stylesheet" href="./marcelo/public/styles/Calendar.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,
        FILL,GRAD@20..48,100..700,0..1,-50..200">
  <style>
    /* ====== Estilos tabla ====== */
    table{
      width: 90%;
      border-collapse: collapse;
      margin: 20px auto;
      font-family: Arial, sans-serif;
      table-layout: fixed; /* para respetar colgroup */
    }
    caption {
      font-size: 1.3em;
      font-weight: bold;
      margin-bottom: 10px;
    }
    th, td {
      border: 1px solid #333;
      padding: 8px;
      text-align: center;
    }
    th{ 
        background-color: #f2f2f2; 
    }
    tr:nth-child(even){ 
        background-color: #f9f9f9; 
    }

    /* La celda del mapa sin padding para que el mapa ocupe al 100% */
    td.map-cell{ padding: 0; }

    /* Contenedor del mapa dentro de la celda */
    #map{
      width: 100%;
      height: 380px;        /* ajusta la altura a tu gusto */
      display: block;
    }

    body {
  background-image: url('./marcelo/img/fondo1.jpg'); /* Cambia la ruta si tu imagen está en otro lugar */
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center center;
}
  </style>
</head>
<body>
  <h1 style="text-align:center;">WEBAPP TERRACLIMA</h1>

  <table>
    <caption>Datos de Ejemplo</caption>

    <!-- Hace la columna del medio más ancha para el mapa -->
    <colgroup>
      <col style="width: 15%;">
      <col style="width: 70%;">  <!-- mapa -->
      <col style="width: 15%;">
    </colgroup>

    <thead>
      <tr>
        <td><img src="./marcelo/img/logo1.jpg" alt="Logo1" height="100" width="100"></td>

        <td></td>

        <td><img src="./marcelo/img/logo3.jpeg" alt="Logo2" height="100" width="100"></td>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>Fila 1, Col 1</td>
        <!-- AQUÍ VA EL MAPA (fila 1, columna 2) -->
        <td class="map-cell">
          <div id="map" aria-label="Mapa (Leaflet)"></div>
        </td>
        <td>Fila 1, Col 3</td>
      </tr>
      <tr>
        <td>Fila 2, Col 1</td>
        <td>
            <div class="calendar-container">
                <header class="calendar-header">
                    <p class="calendar-current-date"></p>
                    <div class="calendar-navigation">
                        <span id="calendar-prev" 
                            class="material-symbols-rounded">
                            
                        </span>
                        <span id="calendar-next" 
                            class="material-symbols-rounded">
                            
                        </span>
                    </div>
                </header>

                <div class="calendar-body">
                    <ul class="calendar-weekdays">
                        <li>Sun</li>
                        <li>Mon</li>
                        <li>Tue</li>
                        <li>Wed</li>
                        <li>Thu</li>
                        <li>Fri</li>
                        <li>Sat</li>
                    </ul>
                    <ul class="calendar-dates"></ul>
                </div>
            </div>
        </td>
        <td>Fila 2, Col 3</td>
      </tr>
      <tr>
        <td>Fila 3, Col 1</td>
        <td>Fila 3, Col 2</td>
        <td>Fila 3, Col 3</td>
      </tr>
      <tr>
        <td>Fila 4, Col 1</td>
        <td>Fila 4, Col 2</td>
        <td>Fila 4, Col 3</td>
      </tr>
    </tbody>
  </table>


  <script src="./marcelo/js/script.js"></script>
  <script>
    // Inicializar Leaflet cuando todo esté listo
    window.addEventListener('load', () => {
      if (!window.L) { alert('Leaflet no se cargó'); return; }

      // Centro inicial (Bolivia, por ejemplo)
      const start = { lat: -16.5, lon: -68.15 };

      const map = L.map('map', { zoomControl: true })
        .setView([start.lat, start.lon], 5);

      // Tiles OSM en https (evita “Mixed Content”)
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; OpenStreetMap contributors'
      }).addTo(map);

      // Marcador inicial
      L.marker([start.lat, start.lon]).addTo(map);

      // Asegura que el mapa calcule bien el tamaño dentro de la celda
      setTimeout(() => map.invalidateSize(), 0);
      window.addEventListener('resize', () => map.invalidateSize());
    });
  </script>
</body>
</html>
